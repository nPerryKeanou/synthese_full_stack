Nous allons ici utiliser le terminal pour utiliser postgresql car mon ordinateur est trop vieux pour utiliser pgAdmin.
Ceci va nous permettre de mieux comprendre le syst√®me.

1) V√©rifie que PostgreSQL est install√©
psql --version

Tu dois voir quelque chose comme psql (PostgreSQL) 16.x.
Si tu obtiens une erreur, installe PostgreSQL avec Homebrew :

brew install postgresql
brew services start postgresql (Ne jamais oublier d'√©teindre postgresql √† la fin de chaque utilisation)

2) Acc√®de √† la console PostgreSQL
psql postgres

3) Cr√©e une base de donn√©es
CREATE DATABASE horsesinshape;

Tu peux v√©rifier qu'elle a bien √©t√© cr√©√©e :
sql :
    \l


-----------------------------------------------------------------------------------------
je ne devrais pas d'abord cr√©er une bases de donn√©es et ensuite une table et ensuite un user ?
-----------------------------------------------------------------------------------------

Voici la r√©ponse claire :
L‚Äôordre recommand√© est bien celui que tu proposes, sauf dans certains cas pratiques.

Ordre logique id√©al (comme en th√©orie ou en entreprise) :
Cr√©er la base de donn√©es
Cr√©er les r√¥les/utilisateurs PostgreSQL
Donner les permissions √† l‚Äôutilisateur sur la base
Cr√©er les tables et structures via ton application (ex: NestJS + TypeORM)

Alors pourquoi j‚Äôai propos√© l‚Äôinverse (utilisateur d'abord) ?
Dans un workflow projet local moderne avec NestJS, on fait souvent :
Cr√©er l‚Äôutilisateur d‚Äôabord (parce que NestJS en a besoin pour acc√©der √† la BDD)
Puis on cr√©e la base de donn√©es en lui assignant directement l‚Äôutilisateur
Ensuite NestJS (via TypeORM) cr√©e les tables automatiquement avec synchronize: true
Donc pas besoin de cr√©er les tables manuellement !

Ce que tu peux retenir :
√âtape	                Pourquoi ?
Cr√©er la base	        Contenant principal
Cr√©er le r√¥le (user)	Pour s√©curiser les acc√®s
Donner les droits	    Pour que l‚Äôutilisateur g√®re sa base
Cr√©er les tables	    Via NestJS/TypeORM ou en SQL


Cr√©er les tables manuellement est parfait pour apprendre le SQL en profondeur, 
et comprendre ensuite comment NestJS/TypeORM reproduit √ßa automatiquement t‚Äôaidera √† faire le lien entre code et base de donn√©es.

√âtapes √† suivre
On va suivre cet ordre :

1.üîß Cr√©er une base PostgreSQL
2.üë§ Cr√©er un utilisateur PostgreSQL
3.üîê Donner les droits √† l‚Äôutilisateur
4.üóÉÔ∏è Cr√©er une table users √† la main en SQL
5.üîÑ Te montrer comment NestJS et TypeORM feraient la m√™me chose
6.üß™ Connecter NestJS √† ta base pour utiliser les donn√©es

1. Cr√©er la base de donn√©es :
Dans ton terminal PostgreSQL (psql) :
CREATE DATABASE horsesinshape;

2. Cr√©er un utilisateur :
CREATE USER horses_admin WITH PASSWORD 'admin123';

3. Donner les droits √† l‚Äôutilisateur :
GRANT ALL PRIVILEGES ON DATABASE horsesinshape TO horses_admin;
        D√©corticage de la commande
    GRANT
        C‚Äôest le mot-cl√© qui sert √† accorder des droits (permissions) √† un utilisateur ou un r√¥le PostgreSQL.
    ALL PRIVILEGES
        Cela signifie que tous les droits possibles sont accord√©s. Par exemple :
            se connecter √† la base
            cr√©er des tables
            modifier des donn√©es
            supprimer des objets
            etc.
    ON DATABASE horsesinshape
        Cible la base de donn√©es horsesinshape sur laquelle les droits sont accord√©s.
    TO horses_admin
        D√©signe le r√¥le (utilisateur) horses_admin qui re√ßoit ces droits.


    Ensuite, connecte-toi √† la base nouvellement cr√©√©e :
    \c horsesinshape

    GRANT ALL PRIVILEGES ON SCHEMA public TO horses_admin;
        ceci sert √† donner tout les droits sur toutes les tables √† l'admin.

4. Cr√©er une table users:
Toujours dans horsesinshape, ex√©cute :
    CREATE TABLE users (id SERIAL PRIMARY KEY, email VARCHAR(255) UNIQUE NOT NULL, password VARCHAR(255) NOT NULL, created_at TIMESTAMP DEFAULT NOW());

    Explication rapide :
    Colonne	        Type	            R√¥le
    id	            SERIAL	            auto-incr√©ment (cl√© primaire)
    email	        VARCHAR	            cha√Æne de caract√®res
    password	    VARCHAR	            mot de passe hash√©
    created_at	    TIMESTAMP	        date de cr√©ation auto

-------------------------------------------------------------------------
Non merci, pas pour le moment. Cependant, pourquoi donn√©e des droits √† l'utilisateur ? 
Je ne vois pas encore le principe √† l'heure actuel. Nous lui donnons les droits sur notre bases de donn√©es ? 
Qui elle auras plusieurs tables ? Il est un simple user qui va avoir un simple compte ou alors c'est un user qui va tout
 controler et m√™me les tables des autres users ?
-------------------------------------------------------------------------
Tr√®s bonne question, c‚Äôest important de bien comprendre la diff√©rence entre les utilisateurs PostgreSQL et les utilisateurs de ton application.

1. L‚Äôutilisateur PostgreSQL (horses_admin)
C‚Äôest un compte utilis√© pour se connecter √† la base de donn√©es.
Cet utilisateur sert √† g√©rer la base depuis ton backend (par exemple NestJS).
Il peut avoir des droits limit√©s ou √©tendus selon ce que tu lui accordes.
Dans ton cas, on lui donne tous les droits sur la base horsesinshape pour que ton backend puisse cr√©er, lire, mettre √† jour, supprimer (CRUD) des tables et donn√©es sans probl√®me.

2. Les utilisateurs de ton application (ex : un vrai utilisateur avec email, mot de passe)
Ce sont les personnes qui vont utiliser ton app mobile ou web.
Ils ne se connectent jamais directement √† la base.
Ils ont des comptes dans ta table users (et autres tables).
Leurs droits d‚Äôacc√®s et permissions sont g√©r√©s dans l‚Äôapp (backend + frontend), via la logique m√©tier.

Pourquoi donner des droits √† horses_admin ?
Ton serveur backend (NestJS) utilise ce compte pour interagir avec la base (ex : via TypeORM).
Sans droits suffisants, ton backend ne pourra pas cr√©er de tables, ni lire ou modifier des donn√©es.
Ce compte est donc un compte technique, pas un utilisateur final.

√Ä quoi sert ce compte technique ?
Administrer la base : cr√©er tables, faire des migrations, ins√©rer des donn√©es, etc.
Ex√©cuter les requ√™tes n√©cessaires au fonctionnement de ton app, avec un acc√®s contr√¥l√©.
Tu peux limiter ses droits si besoin (ex : en production, √©viter les droits de cr√©ation, etc.).

R√©sum√© visuel
R√¥le	            Acc√®s direct base ?	        Usage	                            Droits habituels
Utilisateur         PostgreSQL	                Oui	Backend + administration base	Droits sur DB (cr√©ation, modif)
Utilisateur         application	                Non	Utilisateur final de l‚Äôapp	    Droits limit√©s dans l‚Äôapp